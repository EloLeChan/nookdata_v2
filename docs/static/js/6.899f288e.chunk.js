(this.webpackJsonpnookdata=this.webpackJsonpnookdata||[]).push([[6],{262:function(e,t,a){},334:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return Q}));var r=a(15),n=a(13),i=a(6),c=a(19),l=a(293),o=a(294),u=a(292),s=a(300),m=a(180),d=a(192),h=a(298),p=a(331),y=a(338),b=a(297),f=a(341),E=a(329),g=a(301),v=a(179),O=a(61),k=a(174),j=a(175),C=a(176),_=a(178),w=a(299),N=a(226),A=a(0),S=a.n(A),I=a(210),G=a(161),L=a(45),x=a(57),P=a(21),R=a(40),U=a(277),T=a(255),D=a(256),K=a(225),F=a(257),W=a(276);a(261),a(262);var M=function(e){Object(F.a)(a,e);var t=Object(W.a)(a);function a(e){var r;return Object(T.a)(this,a),(r=t.call(this,e)).chart=null,r.chartElement=null,r.exportChart=r.exportChart.bind(Object(K.a)(r)),r.destroyChart=r.destroyChart.bind(Object(K.a)(r)),r.loadData=r.loadData.bind(Object(K.a)(r)),r.redraw=r.redraw.bind(Object(K.a)(r)),r.setChart=r.setChart.bind(Object(K.a)(r)),r.setChartElementRef=r.setChartElementRef.bind(Object(K.a)(r)),r.unloadData=r.unloadData.bind(Object(K.a)(r)),r.updateConfig=r.updateConfig.bind(Object(K.a)(r)),r}return Object(D.a)(a,[{key:"componentDidMount",value:function(){this.updateChart()}},{key:"shouldComponentUpdate",value:function(e){return!e.isPure||!function(e,t){var a=Object.keys(e),r=Object.keys(t),n=a.length;if(n!==r.length)return!1;for(var i=-1;++i<n;){var c=a[i];if(c!==r[i]||e[c]!==t[c])return!1}return!0}(this.props,e)}},{key:"componentDidUpdate",value:function(){this.updateChart()}},{key:"componentWillUnmount",value:function(){this.destroyChart()}},{key:"destroyChart",value:function(){this.chart&&this.chart.destroy(),this.chart=null}},{key:"exportChart",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(!this.chart)return console.error("No chart is available to export.");this.chart.export({mimeType:e,preserveAspectRatio:!0},t)}},{key:"loadData",value:function(e){if(!this.chart)return console.error("No chart is available to which data can be loaded. It may already have been destroyed, or has never been drawn.");this.chart.load(e)}},{key:"redraw",value:function(){if(!this.chart)return console.error("No chart is available to draw.");this.chart.flush()}},{key:"setChart",value:function(e){if(this.chart)this.loadData(e);else{var t=this.props,a=(t.className,t.domProps,t.isPure,t.style,t.unloadBeforeLoad,Object(U.a)(t,["className","domProps","isPure","style","unloadBeforeLoad"]));this.chart=N.b.generate(Object(R.a)({bindto:this.chartElement},a))}}},{key:"setChartElementRef",value:function(e){this.chartElement=e}},{key:"unloadData",value:function(e){if(!this.chart)return console.error("No chart is available from which data can be unloaded. It may already have been destroyed, or has never been drawn.");this.chart.unload(e)}},{key:"updateChart",value:function(){var e=this.props,t=e.data,a=e.unloadBeforeLoad?Object(R.a)(Object(R.a)({},t),{},{unload:!0}):t;this.setChart(a)}},{key:"updateConfig",value:function(e,t,a){return this.chart?this.chart.config(e,t,a):console.error("You are trying to set the config a chart that does not exist.Have you passed `data`?")}},{key:"render",value:function(){var e=this.props,t=e.className,a=e.domProps,r=e.style;return S.a.createElement("div",Object.assign({className:t,style:r},a,{ref:this.setChartElementRef}))}}]),a}(S.a.Component);M.displayName="Chart",M.getInstances=function(){return N.b.instance};var B,J=M,H=a(93),Y=(B={},Object(i.a)(B,H.a.FLUCTUATING,"turnips:graph.fluctuating"),Object(i.a)(B,H.a.LARGE_SPIKE,"turnips:graph.large_spike"),Object(i.a)(B,H.a.DECREASING,"turnips:graph.decreasing"),Object(i.a)(B,H.a.SMALL_SPIKE,"turnips:graph.small_spike"),Object(i.a)(B,H.a.AGGREGATE,"turnips:graph.aggregate"),Object(i.a)(B,H.a.UNKNOWN,"Something went wrong. Sorry."),B),q=["mon","tue","wed","thu","fri","sat"];function z(e){var t,a,r=e.result,m=Object(G.a)(["core","turnips"]).t,d=Object(c.a)(),h=(t={},Object(i.a)(t,H.a.FLUCTUATING,r.filter((function(e){return e.pattern===H.a.FLUCTUATING}))),Object(i.a)(t,H.a.LARGE_SPIKE,r.filter((function(e){return e.pattern===H.a.LARGE_SPIKE}))),Object(i.a)(t,H.a.DECREASING,r.filter((function(e){return e.pattern===H.a.DECREASING}))),Object(i.a)(t,H.a.SMALL_SPIKE,r.filter((function(e){return e.pattern===H.a.SMALL_SPIKE}))),Object(i.a)(t,H.a.AGGREGATE,[r[0]]),Object(i.a)(t,H.a.UNKNOWN,[]),t);if(r.length){var p,y=[m("turnips:graph.buy"),m("core:time.meridian.am.short_day",{day:m("core:time.weekday.mon.short")}),m("core:time.meridian.pm.short_day",{day:m("core:time.weekday.mon.short")}),m("core:time.meridian.am.short_day",{day:m("core:time.weekday.tue.short")}),m("core:time.meridian.pm.short_day",{day:m("core:time.weekday.tue.short")}),m("core:time.meridian.am.short_day",{day:m("core:time.weekday.wed.short")}),m("core:time.meridian.pm.short_day",{day:m("core:time.weekday.wed.short")}),m("core:time.meridian.am.short_day",{day:m("core:time.weekday.thu.short")}),m("core:time.meridian.pm.short_day",{day:m("core:time.weekday.thu.short")}),m("core:time.meridian.am.short_day",{day:m("core:time.weekday.fri.short")}),m("core:time.meridian.pm.short_day",{day:m("core:time.weekday.fri.short")}),m("core:time.meridian.am.short_day",{day:m("core:time.weekday.sat.short")}),m("core:time.meridian.pm.short_day",{day:m("core:time.weekday.sat.short")})],b=[],f={},E={},g=0,v=Object(n.a)(r);try{for(v.s();!(p=v.n()).done;){var O,k=p.value,j=["data".concat(g)],C=Object(n.a)(k.hours);try{for(C.s();!(O=C.n()).done;){var _=O.value;j.push({low:_.min,high:_.max,mid:_.avg.toFixed(2)})}}catch(w){C.e(w)}finally{C.f()}b.push(j),E["data".concat(g)]=m(Y[k.pattern],{patternChance:(100*k.chance).toFixed(2)}),f["data".concat(g++)]=H.f[d.name][k.pattern](k.chance*(a=h[k.pattern].length,Math.log2(a)+1))}}catch(w){v.e(w)}finally{v.f()}return S.a.createElement(S.a.Fragment,null,S.a.createElement(l.a,{style:{margin:16}},S.a.createElement(o.a,null,S.a.createElement(J,{key:d.name,isPure:!0,className:"chart ".concat(d.name),data:{columns:b,colors:f,names:E,type:Object(N.a)()},legend:{show:!1},axis:{x:{tick:{format:function(e){return y[e]},values:Object(P.h)(13),count:13,rotate:90,multiline:!1,tooltip:!0,culling:!1}}}}))),S.a.createElement("div",{style:{margin:"0 16px"}},S.a.createElement(u.a,{container:!0,spacing:2},[H.a.SMALL_SPIKE,H.a.LARGE_SPIKE,H.a.FLUCTUATING,H.a.DECREASING].map((function(e){var t;return S.a.createElement(u.a,{item:!0,xs:12,sm:6,lg:3,key:e},S.a.createElement(l.a,{style:{backgroundColor:"light"===d.name?H.f.light[e](1):void 0,color:"light"===d.name?void 0:H.f.dark[e](1)}},S.a.createElement(s.a,{title:(t={},Object(i.a)(t,H.a.SMALL_SPIKE,m("turnips:pattern.small_spike")),Object(i.a)(t,H.a.LARGE_SPIKE,m("turnips:pattern.large_spike")),Object(i.a)(t,H.a.FLUCTUATING,m("turnips:pattern.fluctuating")),Object(i.a)(t,H.a.DECREASING,m("turnips:pattern.decreasing")),Object(i.a)(t,H.a.AGGREGATE,"Something went wrong"),Object(i.a)(t,H.a.UNKNOWN,"Something went wrong"),t)[e],titleTypographyProps:{variant:"h6"}}),S.a.createElement(o.a,null,S.a.createElement(L.c,null,(100*Object(P.e)(h[e].map((function(e){return e.chance})))).toFixed(2),"%"))))})))))}return null}function Q(){var e;console.log("render!");var t=Object(x.c)(),a=t.settings,n=t.turnips,N=t.updateData,A=S.a.useState(!1),R=Object(r.a)(A,2),U=R[0],T=R[1],D=S.a.useState(!1),K=Object(r.a)(D,2),F=K[0],W=K[1],M=Object(H.c)(n);function B(e){N({turnips:e})}function J(){var e=Object(P.b)(H.d);e.previousPattern=Object(H.e)(n),B(e)}var Y=Object(G.a)(["core","turnips"]).t,Q=Object(c.a)(),V=!Object(m.a)(Q.breakpoints.up("sm")),X=S.a.createElement(u.a,{item:!0,xs:12,sm:6},S.a.createElement(L.c,null,S.a.createElement(d.a,{title:Y("turnips:prices.first_buy.hover")},S.a.createElement(h.a,{control:S.a.createElement(p.a,{checked:n.firstBuy,onChange:function(e){return B({firstBuy:e.target.checked})},color:"primary"}),label:Y("turnips:prices.first_buy.checkbox")})))),Z=S.a.useMemo((function(){return Object(H.c)(n)?Object(H.b)(n):[]}),[n]),$=S.a.createElement(z,{result:Z});return Z.length||(M=!1),S.a.createElement(S.a.Fragment,null,S.a.createElement(I.a,null,S.a.createElement("title",null,Y("core:title.browser.page",{pageTitle:Y("core:pages.turnips")}))),S.a.createElement("div",{style:{maxWidth:800,margin:"auto"}},S.a.createElement(l.a,{style:{margin:16}},S.a.createElement(s.a,{title:Y("turnips:prices.title")}),S.a.createElement(o.a,null,S.a.createElement(u.a,{container:!0,spacing:1},V&&X,S.a.createElement(u.a,{item:!0,xs:12,sm:6},S.a.createElement(y.a,{type:"number",fullWidth:!0,value:null!==(e=n.buy)&&void 0!==e?e:"",onChange:function(e){return B({buy:e.target.value?+e.target.value:null})},label:Y("turnips:prices.buy")})),!V&&X,q.map((function(e){var t,a;return S.a.createElement(S.a.Fragment,{key:e},S.a.createElement(u.a,{item:!0,xs:12,sm:6,key:"".concat(e,"am")},S.a.createElement(y.a,{type:"number",fullWidth:!0,value:null!==(t=n[e].am)&&void 0!==t?t:"",onChange:function(t){return B(Object(i.a)({},e,{am:t.target.value?+t.target.value:null}))},label:Y("core:time.meridian.am.long_day",{day:Y("core:time.weekday.".concat(e,".long"))})})),S.a.createElement(u.a,{item:!0,xs:12,sm:6,key:"".concat(e,"pm")},S.a.createElement(y.a,{type:"number",fullWidth:!0,value:null!==(a=n[e].pm)&&void 0!==a?a:"",onChange:function(t){return B(Object(i.a)({},e,{pm:t.target.value?+t.target.value:null}))},label:Y("core:time.meridian.pm.long_day",{day:Y("core:time.weekday.".concat(e,".long"))})})))})),S.a.createElement(u.a,{item:!0,xs:12,sm:6},S.a.createElement(b.a,{fullWidth:!0},S.a.createElement(f.a,{id:"comp-label"},Y("turnips:pattern.label")),S.a.createElement(E.a,{value:n.previousPattern,onChange:function(e){return B({previousPattern:e.target.value})},labelId:"pattern-label",fullWidth:!0},S.a.createElement(g.a,{value:H.a.SMALL_SPIKE},Y("turnips:pattern.small_spike")),S.a.createElement(g.a,{value:H.a.LARGE_SPIKE},Y("turnips:pattern.large_spike")),S.a.createElement(g.a,{value:H.a.FLUCTUATING},Y("turnips:pattern.fluctuating")),S.a.createElement(g.a,{value:H.a.DECREASING},Y("turnips:pattern.decreasing")),S.a.createElement(g.a,{value:H.a.UNKNOWN},Y("turnips:pattern.unknown"))))),S.a.createElement(u.a,{item:!0,xs:12,sm:6},S.a.createElement(v.a,{style:{height:"100%"},fullWidth:!0,variant:"contained",color:"primary",onClick:function(){a.turnipNoConfirm?J():T(!0)}},Y("turnips:ui.start_next")))),M||S.a.createElement(S.a.Fragment,null,S.a.createElement("br",null),S.a.createElement(L.c,null,S.a.createElement("div",{style:{display:"inline-flex",justifyContent:"center",height:"100%",color:Q.palette.error.main,paddingRight:8}},S.a.createElement(w.a,null)),S.a.createElement(O.a,{color:"error"},Y("turnips:ui.bad_data")))))),$),S.a.createElement(k.a,{open:U},S.a.createElement(j.a,null,Y("turnips:ui.reset_dialogue.title")),S.a.createElement(C.a,null,Y("turnips:ui.reset_dialogue.text"),S.a.createElement("br",null),S.a.createElement(h.a,{control:S.a.createElement(p.a,{checked:F,onChange:function(e){return W(e.target.checked)},color:"primary"}),label:Y("core:ui.dont_ask")})),S.a.createElement(_.a,null,S.a.createElement(v.a,{onClick:function(){return T(!1)}},Y("core:ui.cancel")),S.a.createElement(v.a,{onClick:function(){F&&N({settings:{turnipNoConfirm:!0}}),T(!1),J()}},Y("core:ui.confirm")))))}}}]);
//# sourceMappingURL=6.899f288e.chunk.js.map